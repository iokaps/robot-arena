/* Font imports */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&display=swap');

/* Imports */
@import 'tailwindcss';
@import '@kokimoki/shared/styles.css';

@plugin '@tailwindcss/typography';

@theme {
	/* Retro Robot Industrial Theme for Code-A-Bot Arena */
	--km-font-sans:
		'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
		'Liberation Mono', 'Courier New', monospace;
	--font-display:
		'Orbitron', 'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco,
		Consolas, 'Liberation Mono', 'Courier New', monospace;
	--font-mono:
		'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
		'Liberation Mono', 'Courier New', monospace;

	/* Industrial color palette - vivid neon tones */
	--color-neon-cyan: oklch(0.78 0.14 200); /* Bright electric blue */
	--color-neon-fuchsia: oklch(0.68 0.18 340); /* Hot magenta */
	--color-neon-lime: oklch(0.82 0.2 145); /* Acid green */
	--color-neon-orange: oklch(0.72 0.18 55); /* Fire orange */
	--color-neon-amber: oklch(0.78 0.16 85); /* Conveyor amber */
	--color-neon-rose: oklch(0.65 0.2 20); /* Danger red */
	--color-neon-violet: oklch(0.6 0.15 280); /* Ultraviolet */

	/* Arena colors - dark factory floor */
	--color-arena-bg: oklch(0.1 0.015 250);
	--color-arena-grid: oklch(0.18 0.025 250);
	--color-arena-obstacle: oklch(0.2 0.02 250);

	/* Panel colors */
	--color-panel-bg: oklch(0.14 0.01 240);
	--color-panel-border: oklch(0.28 0.02 240);
}

/* Markdown styling with Tailwind Typography (prose) */
.prose {
	--tw-prose-headings: var(--color-slate-50);
	--tw-prose-body: var(--color-slate-300);
	--tw-prose-bold: var(--color-slate-100);
	--tw-prose-links: var(--color-neon-cyan);
	--tw-prose-bullets: var(--color-neon-cyan);
	--tw-prose-counters: var(--color-neon-cyan);
	--tw-prose-quotes: var(--color-slate-300);
	--tw-prose-pre-bg: var(--color-slate-900);
	--tw-prose-pre-code: var(--color-slate-100);
	--tw-prose-hr: var(--color-slate-800);
}

html,
body {
	@apply overscroll-none bg-slate-950 text-slate-100;
}

/* Subtle grid background pattern on body */
body {
	background-image:
		linear-gradient(oklch(0.15 0.02 250 / 0.5) 1px, transparent 1px),
		linear-gradient(90deg, oklch(0.15 0.02 250 / 0.5) 1px, transparent 1px);
	background-size: 40px 40px;
}

/* Scanline overlay for CRT feel */
body::after {
	content: '';
	position: fixed;
	inset: 0;
	pointer-events: none;
	z-index: 9999;
	background: repeating-linear-gradient(
		0deg,
		transparent,
		transparent 2px,
		oklch(0 0 0 / 0.03) 2px,
		oklch(0 0 0 / 0.03) 4px
	);
}

.km-input {
	@apply focus:border-neon-cyan focus:ring-neon-cyan/40 w-full max-w-96 rounded-sm border-2 border-slate-600 bg-slate-800/80 px-4 py-3 font-mono tracking-wider text-slate-100 uppercase shadow-inner transition-all duration-200 placeholder:text-slate-500 placeholder:normal-case focus:ring-2 focus:outline-none disabled:opacity-50;
	backdrop-filter: blur(4px);
}

.km-btn-primary,
.km-btn-secondary,
.km-btn-error,
.km-btn-neutral {
	@apply inline-flex items-center justify-center gap-3 border-2 px-5 py-3 font-mono font-semibold tracking-wider uppercase transition-all duration-200 not-disabled:cursor-pointer disabled:cursor-not-allowed disabled:opacity-40;
}

.km-btn-primary {
	@apply border-neon-cyan bg-neon-cyan/15 text-neon-cyan not-disabled:hover:bg-neon-cyan/25 not-disabled:hover:shadow-[0_0_20px_var(--color-neon-cyan)/0.3] not-disabled:active:translate-y-0.5 not-disabled:active:border-b-2 disabled:border-slate-600 disabled:bg-slate-800 disabled:text-slate-500;
	border-bottom-width: 4px;
}

.km-btn-secondary {
	@apply not-disabled:hover:border-neon-cyan not-disabled:hover:text-neon-cyan border-slate-500 bg-slate-800/80 text-slate-300 not-disabled:hover:shadow-[0_0_12px_var(--color-neon-cyan)/0.15] not-disabled:active:translate-y-0.5 not-disabled:active:border-b-2 disabled:text-slate-600;
	border-bottom-width: 4px;
}

.km-btn-error {
	@apply border-neon-rose bg-neon-rose/15 text-neon-rose not-disabled:hover:bg-neon-rose/25 not-disabled:hover:shadow-[0_0_20px_var(--color-neon-rose)/0.3] not-disabled:active:translate-y-0.5 not-disabled:active:border-b-2 disabled:border-slate-600 disabled:bg-slate-800 disabled:text-slate-500;
	border-bottom-width: 4px;
}

.km-btn-neutral {
	@apply border-slate-500 bg-slate-800/80 text-slate-200 not-disabled:hover:border-slate-400 not-disabled:hover:bg-slate-700 not-disabled:active:translate-y-0.5 not-disabled:active:border-b-2 disabled:border-slate-700 disabled:bg-slate-800 disabled:text-slate-500;
	border-bottom-width: 4px;
}

/* Industrial mechanical styling utilities */
.retro-border {
	@apply border-2 border-slate-500;
	border-bottom-width: 4px;
}

.retro-panel {
	@apply border-2 border-slate-700 bg-slate-800/60;
	backdrop-filter: blur(8px);
}

/* Text styling - neon glow effect */
.neon-text-glow {
	text-shadow:
		0 0 7px currentColor,
		0 0 20px currentColor,
		0 0 40px currentColor;
}

/* Softer glow for smaller text */
.neon-text-glow-sm {
	text-shadow:
		0 0 5px currentColor,
		0 0 12px currentColor;
}

/* Pulse animation for urgent states - more mechanical, stepped */
@keyframes neon-pulse {
	0%,
	100% {
		opacity: 1;
	}
	50% {
		opacity: 0.4;
	}
}

.animate-neon-pulse {
	animation: neon-pulse 0.8s ease-in-out infinite;
}

/* Glitch effect for elimination */
@keyframes glitch {
	0%,
	100% {
		transform: translate(0);
		filter: hue-rotate(0deg);
	}
	10% {
		transform: translate(-3px, 2px);
	}
	20% {
		transform: translate(3px, -1px);
		filter: hue-rotate(45deg);
	}
	30% {
		transform: translate(-2px, 0);
	}
	40% {
		transform: translate(2px, 2px);
		filter: hue-rotate(-30deg);
	}
	50% {
		transform: translate(-1px, -2px);
	}
	60% {
		transform: translate(3px, 1px);
		filter: hue-rotate(60deg);
	}
	70% {
		transform: translate(-3px, -1px);
	}
	80% {
		transform: translate(1px, 2px);
		filter: hue-rotate(-20deg);
	}
	90% {
		transform: translate(-2px, 0);
	}
}

.animate-glitch {
	animation: glitch 0.5s steps(10) infinite;
}

/* Slot fill animation */
@keyframes slot-fill {
	0% {
		transform: scale(0.5);
		opacity: 0;
	}
	50% {
		transform: scale(1.15);
	}
	100% {
		transform: scale(1);
		opacity: 1;
	}
}

.animate-slot-fill {
	animation: slot-fill 0.25s ease-out;
}

/* Float animation for icons */
@keyframes float {
	0%,
	100% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(-6px);
	}
}

.animate-float {
	animation: float 3s ease-in-out infinite;
}

/* Trophy shine animation */
@keyframes shine {
	0% {
		filter: brightness(1) drop-shadow(0 0 8px currentColor);
	}
	50% {
		filter: brightness(1.3) drop-shadow(0 0 20px currentColor);
	}
	100% {
		filter: brightness(1) drop-shadow(0 0 8px currentColor);
	}
}

.animate-shine {
	animation: shine 2s ease-in-out infinite;
}

/* Fade in up for view transitions */
@keyframes fade-in-up {
	0% {
		opacity: 0;
		transform: translateY(12px);
	}
	100% {
		opacity: 1;
		transform: translateY(0);
	}
}

.animate-fade-in-up {
	animation: fade-in-up 0.4s ease-out;
}

/* Counting animation */
@keyframes count-pulse {
	0%,
	100% {
		transform: scale(1);
	}
	50% {
		transform: scale(1.08);
	}
}

.animate-count-pulse {
	animation: count-pulse 0.6s ease-in-out;
}

/* Chibi robot animations */
@keyframes antenna-bob {
	0%,
	100% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(-2px);
	}
}

@keyframes chibi-idle {
	0%,
	100% {
		transform: scale(1);
	}
	50% {
		transform: scale(1.02);
	}
}

@keyframes chibi-broken {
	0% {
		transform: rotate(0deg);
		opacity: 1;
	}
	10% {
		transform: rotate(-5deg) translateX(-2px);
	}
	20% {
		transform: rotate(5deg) translateX(2px);
	}
	30% {
		transform: rotate(-3deg) translateX(-1px);
	}
	40% {
		transform: rotate(8deg);
		opacity: 1;
	}
	100% {
		transform: rotate(8deg);
		opacity: 0;
	}
}

@keyframes shield-bubble {
	0%,
	100% {
		opacity: 0.6;
		transform: scale(1);
	}
	50% {
		opacity: 0.85;
		transform: scale(1.03);
	}
}

.animate-antenna-bob {
	animation: antenna-bob 2s ease-in-out infinite;
	will-change: transform;
}

.animate-chibi-idle {
	animation: chibi-idle 3s ease-in-out infinite;
	will-change: transform;
}

.animate-chibi-broken {
	animation: chibi-broken 1.5s ease-out forwards;
	will-change: transform, opacity;
}

.animate-shield-bubble {
	animation: shield-bubble 1.5s ease-in-out infinite;
	will-change: opacity, transform;
}

/* Direction arrow pulse animation */
@keyframes arrow-pulse {
	0%,
	100% {
		opacity: 0.75;
		transform: translateY(0) scale(1);
	}
	50% {
		opacity: 1;
		transform: translateY(-1px) scale(1.05);
	}
}

.animate-arrow-pulse {
	animation: arrow-pulse 1.5s ease-in-out infinite;
	will-change: opacity, transform;
	transform-origin: center bottom;
}

/* Robot mechanical indicator */
.robot-indicator {
	@apply relative;
}

.robot-indicator::after {
	content: '';
	@apply absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 border-r-4 border-b-8 border-l-4 border-r-transparent border-l-transparent;
	border-bottom-color: currentColor;
}

/* Laser beam glow effect */
.laser-beam {
	box-shadow:
		0 0 4px currentColor,
		0 0 10px currentColor,
		0 0 20px currentColor;
}

/* Arena border glow */
.arena-border-glow {
	box-shadow:
		inset 0 0 20px oklch(0.18 0.025 250 / 0.5),
		0 0 12px oklch(0.18 0.025 250 / 0.3);
}

/* Obstacle rivet detail */
.obstacle-cell {
	background-image:
		radial-gradient(
			circle at 25% 25%,
			oklch(0.3 0.02 250) 1px,
			transparent 1px
		),
		radial-gradient(circle at 75% 75%, oklch(0.3 0.02 250) 1px, transparent 1px);
}

/* Panel glow on hover */
.panel-glow {
	transition: box-shadow 0.3s ease;
}

.panel-glow:hover {
	box-shadow: 0 0 15px oklch(0.78 0.14 200 / 0.1);
}

/* Phase badge animation */
@keyframes phase-glow {
	0%,
	100% {
		box-shadow: 0 0 8px currentColor;
	}
	50% {
		box-shadow: 0 0 16px currentColor;
	}
}

.animate-phase-glow {
	animation: phase-glow 2s ease-in-out infinite;
}

/* Pickup float */
@keyframes pickup-bob {
	0%,
	100% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(-2px);
	}
}

.animate-pickup-bob {
	animation: pickup-bob 1.5s ease-in-out infinite;
}

/* Command slot hover feedback */
.command-slot {
	transition: all 0.15s ease-out;
}

.command-slot:hover {
	transform: translateY(-2px);
}

/* Screen flicker for dramatic moments */
@keyframes screen-flicker {
	0%,
	100% {
		opacity: 1;
	}
	92% {
		opacity: 1;
	}
	93% {
		opacity: 0.6;
	}
	94% {
		opacity: 1;
	}
	96% {
		opacity: 0.8;
	}
	97% {
		opacity: 1;
	}
}

.animate-screen-flicker {
	animation: screen-flicker 4s linear infinite;
}
